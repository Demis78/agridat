# ocr.r
# Time-stamp: <20 Apr 2017 17:50:42 c:/x/rpack/agridat/data-raw/ocr.r>

lib(tesseract)
# Default settings
setwd("c:/x/rpack/agridat/data-raw/")
dd=ocr("nonnecke.jpg")
cat(dd) # strange...results are not consistent
## l 1.36 1.54 2.02 1.86 1.29 1.07 1.15 1.06 1.05 1-65 1.48 1.47 2.00 1.06 0.98
## 2 0.76 1-50 1.48 1.48 1.26 0.93 1.46 1.04 0.67 1.24 1.27 1.55 1.14 0.77 0.72
## 3 1-15 1.24 1.75 1.44 1.22 1.31 1.14 0-91 1.39 , 1.12 1.49 1.57 l.27 1301 0.67
## 4 1.20 1.54 1.66 1.59 1.54 1.16 1.09 0.81 1-12 0-92 0-87 1.11 1.05 0.96 0.96
## 5 0.94 1.25 1.15 1.59 1-26 1.42 0.85 0.87 0.97 1.07 1.03 1.28 1.35 0.84 0.72
## 6 1.21 1.52 1;55 1.50 1.41 l;59 1.17 1.04 1.11 0.96 0.95 1-04 0.98 0.54 0.66
## 7 1.50 1.57 1.53 1.51 1.62 1.55 l;00 0.89 1.55 1.05 0.95 0.91 1.16 0.54 0.72
## 8 1L46 1.24 1.46 1-27 l$28 1.40 1.29 1.20 1.29 1:04 0.66 0.93 0.45 0.72 0.79
## 9 1.58 1-34 1.59 1.36 1.60 1;4B 1.59 1.28 l;29 1.68 0;88 0.90 0.64 1.05 0.80
## 10 1.36 1.25 1.62 1.40 1.43 1.74 1.53 1.54 1.25 1.45 0.85 0.47 0.48 0.63 0.50
## 11 1.12 1.25 1.65 1.60 1.52 1.57 1.55 1;42 1.58 1.45 0.94 0.97 0.67 1.15 0.74
## 12 0.99 1.15 1-48 1.52 1.50 1.74 1L40 1.00 1.50 1-45 0.94 1.25 0.84 0.91 0.65
## 15 1.15 1.24 1-50 l}52 1.88 1.62 1.45 1.25 1.41 1360 1305 l;22 0.77 0.58 0-45
## 14 1.21 1.56 1.27 0.89 1.53 1.50 1.22 0.86 0.98 1.05 0.96 0.40 0.41 Â‘0.55 0.88
## 15 1.15 1.24 1}43 1.58 1.61 l;71 1370 1.10 1.46 0.88 0320 0.29 0.27 0.28 0.86
## 16 lkll 0.80 1.35 1.25 1.53 0.95 1.06 0.64 0.20 0.56 0.28 1.18 1.27 0.61 1.11
## 17 0.60 l}40 1.05 0.89 0195 0.99 0;5l 0.22 0.77 1.75 1.11 1348 1.21 0.68 1.21
## 18 OQ42 0.92 0.76 1.26 0.29 0.56 0;40 0.57 0.52 0375 0.79 1.05 1a10 0.71 0.95

# should only find decimal numbers
eng = tesseract(options=list(tessedit_char_whitelist="0123456789."))
dd=ocr("c:/x/test.jpg",engine=eng)
cat(dd)
scan(text=dd) # still one bug
# in the interactive buffuer only: fix(dd)

# dput(dd) # copy and fix '.' '1140'
dd="1 1.56 1.54 2.02 1.86 1.29 1.07 1.15 1.06 1.05 1.65 1.48 1.47 2.00 1.06 0.98\n2 0.76 1.50 1.48 1.48 1.26 0.95 1.46 1.04 0.67 1.24 1.27 1.55 1.14 0.77 0.72\n5 1.15 1.24 1.75 1.44 1.22 1.51 1.14 0.91 1.59 1.12 1.49 1.57 1.27 1.01 0.67\n4 1.20 1.54 1.66 1.59 1.54 1.16 1.09 0.81 1.12 0.92 0.87 1.11 1.05 0.96 0.96\n5 0.94 1.25 1.15 1.59 1.26 1.42 0.85 0.87 0.97 1.07 1.05 1.28 1.55 0.84 0.72\n6 1.21 1.52 1.55 1.50 1.41 1.59 1.17 1.04 1.11 0.96 0.95 1.04 0.98 0.54 0.66\n7 1.50 1.57 1.55 1.51 1.62 1.55 1.00 0.89 1.55 1.05 0.95 0.91 1.16 0.54 0.72\n8 1.46 1.24 1.46 1.27 1.28 1.40 1.29 1.20 1.29 1.04 0.66 0.95 0.45 0.72 0.79\n9 1.58 1.54 1.59 1.56 1.60 1.48 1.59 1.28 1.29 1.68 0.88 0.90 0.64 1.05 0.80\n10 1.56 1.25 1.62 1.40 1.45 1.74 1.55 1.54 1.25 1.45 0.85 0.47 0.48 0.65 0.50\n11 1.12 1.26 1.65 1.60 1.52 1.57 1.55 1.42 1.58 1.45 0.94 0.97 0.67 1.15 0.74\n12 0.99 1.15 1.48 1.52 1.50 1.74 1.40 1.00 1.50 1.45 0.94 1.25 0.84 0.91 0.68\n15 1.15 1.24 1.50 1.52 1.88 1.62 1.45 1.25 1.41 1.60 1.05 1.22 0.77 0.58 0.45\n14 1.21 1.58 1.27 0.89 1.55 1.50 1.22 0.88 0.98 1.05 0.96 0.40 0.41 10.55 0.88\n15 1.15 1.24 1.45 1.58 1.61 1.71 1.70 1.10 1.46 0.88 0.20 0.29 0.27 0.28 0.86\n16 1.11 0.80 1.55 1.25 1.55 0.95 1.06 0.64 0.20 0.56 0.28 1.18 1.27 0.61 1.11\n17 0.80 1.40 1.06 0.89 0.95 0.99 0.51 0.22 0.77 1.75 1.11 1.48 1.21 0.68 1.21\n18 0.42 0.92 0.76 1.26 0.29 0.56 0.40 0.57 0.52 0.75 0.79 1.05 1.10 0.71 0.95\n\n"

d2 = scan(text=dd)
d2 = matrix(d2, nrow=18, byrow=TRUE)
d2 = d2[,-1] # row numbers

lib(lattice)
lib(pals)
levelplot(d2, col.regions=parula)
levelplot(d2)

# More
dd="1 1.56 1.54 2.02 1.86 1.29 1.07 1.15 1.06 1.05 1.65 1.48 1.47 2.00 1.06 0.98\n2 0.76 1.50 1.48 1.48 1.26 0.95 1.46 1.04 0.67 1.24 1.27 1.55 1.14 0.77 0.72\n5 1.15 1.24 1.75 1.44 1.22 1.51 1.14 0.91 1.59 1.12 1.49 1.57 1.27 1.01 0.67\n4 1.20 1.54 1.66 1.59 1.54 1.16 1.09 0.81 1.12 0.92 0.87 1.11 1.05 0.96 0.96\n5 0.94 1.25 1.15 1.59 1.26 1.42 0.85 0.87 0.97 1.07 1.05 1.28 1.55 0.84 0.72\n6 1.21 1.52 1.55 1.50 1.41 1.59 1.17 1.04 1.11 0.96 0.95 1.04 0.98 0.54 0.66\n7 1.50 1.57 1.55 1.51 1.62 1.55 1.00 0.89 1.55 1.05 0.95 0.91 1.16 0.54 0.72\n8 1.46 1.24 1.46 1.27 1.28 1.40 1.29 1.20 1.29 1.04 0.66 0.95 0.45 0.72 0.79\n9 1.58 1.54 1.59 1.56 1.60 1.48 1.59 1.28 1.29 1.68 0.88 0.90 0.64 1.05 0.80\n10 1.56 1.25 1.62 1.40 1.45 1.74 1.55 1.54 1.25 1.45 0.85 0.47 0.48 0.65 0.50\n11 1.12 1.26 1.65 1.60 1.52 1.57 1.55 1.42 1.58 1.45 0.94 0.97 0.67 1.15 0.74\n12 0.99 1.15 1.48 1.52 1.50 1.74 1.40 1.00 1.50 1.45 0.94 1.25 0.84 0.91 0.68\n15 1.15 1.24 1.50 1.52 1.88 1.62 1.45 1.25 1.41 1.60 1.05 1.22 0.77 0.58 0.45\n14 1.21 1.58 1.27 0.89 1.55 1.50 1.22 0.88 0.98 1.05 0.96 0.40 0.41 1.15 0.88\n15 1.15 1.24 1.45 1.58 1.61 1.71 1.70 1.10 1.46 0.88 0.20 0.29 0.27 0.28 0.86\n16 1.11 0.80 1.55 1.25 1.55 0.95 1.06 0.64 0.20 0.56 0.28 1.18 1.27 0.61 1.11\n17 0.80 1.40 1.06 0.89 0.95 0.99 0.51 0.22 0.77 1.75 1.11 1.48 1.21 0.68 1.21\n18 0.42 0.92 0.76 1.26 0.29 0.56 0.40 0.57 0.52 0.75 0.79 1.05 1.10 0.71 0.95\n\n"
